---
---

<section id="cta" class="section">
  <div class="cta-layout">
    <div class="cta-content">
      <h3 class="section-title">Follow along</h3>
      <p class="text-text" style="margin-bottom: 24px;">
        Sandchest is being built in the open. Star the repo to follow development and get notified when we ship.
      </p>
      <div class="cta-buttons">
        <a
          href="https://github.com/sandchest"
          class="star-btn no-underline hover:no-underline"
          target="_blank"
          rel="noopener"
        >
          <svg class="h-[18px] w-[18px]" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
          </svg>
          Star on GitHub
        </a>
        <a
          href="https://github.com/sandchest"
          class="follow-btn no-underline hover:no-underline"
          target="_blank"
          rel="noopener"
        >
          View Repository
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M7 17L17 7M17 7H7M17 7v10" />
          </svg>
        </a>
      </div>
    </div>
    <div class="cta-animation" id="star-anim"></div>
  </div>
</section>

<style>
  .cta-layout {
    display: flex;
    align-items: center;
    gap: 48px;
  }

  .cta-content {
    flex: 1;
    min-width: 0;
  }

  .cta-animation {
    width: 240px;
    height: 180px;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .cta-buttons {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
  }

  .star-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 18px;
    border-radius: 4px;
    background: var(--color-text-strong);
    color: var(--color-background);
    font-weight: 500;
    font-size: inherit;
    font-family: inherit;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .star-btn:hover {
    background: white;
  }

  .follow-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 18px;
    border-radius: 4px;
    border: 1px solid var(--color-border);
    color: var(--color-text);
    font-size: inherit;
    font-family: inherit;
    transition: all 0.2s ease;
    white-space: nowrap;
  }

  .follow-btn:hover {
    border-color: var(--color-text-weak);
    color: var(--color-text-strong);
  }

  @media (max-width: 50rem) {
    .cta-layout {
      flex-direction: column-reverse;
      gap: 24px;
      align-items: flex-start;
    }

    .cta-animation {
      width: 100%;
      height: 140px;
    }
  }

  @media (max-width: 30rem) {
    .cta-buttons {
      flex-direction: column;
    }

    .star-btn,
    .follow-btn {
      justify-content: center;
      width: 100%;
    }
  }
</style>

<script>
  function initStarAnimation() {
    const container = document.getElementById('star-anim');
    if (!container) return;

    const canvas = document.createElement('canvas');
    const w = 240, h = 180;
    canvas.width = w * 2; canvas.height = h * 2;
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    container.appendChild(canvas);
    const ctx = canvas.getContext('2d')!;
    ctx.scale(2, 2);

    const accent = getComputedStyle(document.documentElement).getPropertyValue('--color-accent').trim();
    const border = getComputedStyle(document.documentElement).getPropertyValue('--color-border').trim();
    const weak = getComputedStyle(document.documentElement).getPropertyValue('--color-text-weak').trim();

    // Star shape helper
    function drawStar(cx: number, cy: number, outerR: number, innerR: number, points: number) {
      ctx.beginPath();
      for (let i = 0; i < points * 2; i++) {
        const r = i % 2 === 0 ? outerR : innerR;
        const a = (i * Math.PI) / points - Math.PI / 2;
        const x = cx + Math.cos(a) * r;
        const y = cy + Math.sin(a) * r;
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
    }

    // Particles that burst out when the star pulses
    interface Particle {
      x: number;
      y: number;
      vx: number;
      vy: number;
      life: number;
      maxLife: number;
      size: number;
    }

    const particles: Particle[] = [];
    let lastBurst = 0;

    function burst(cx: number, cy: number) {
      for (let i = 0; i < 8; i++) {
        const angle = (Math.PI * 2 * i) / 8 + (Math.random() - 0.5) * 0.5;
        const speed = 0.4 + Math.random() * 0.6;
        particles.push({
          x: cx,
          y: cy,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          life: 0,
          maxLife: 60 + Math.random() * 40,
          size: 1 + Math.random() * 1.5,
        });
      }
    }

    let t = 0;
    function draw() {
      ctx.clearRect(0, 0, w, h);
      const cx = w / 2, cy = h / 2;

      // Pulse cycle: smooth breathing
      const pulse = Math.sin(t * 0.02) * 0.5 + 0.5; // 0→1→0

      // Burst particles at peak
      if (pulse > 0.95 && t - lastBurst > 60) {
        burst(cx, cy);
        lastBurst = t;
      }

      // Draw orbiting small stars
      for (let i = 0; i < 5; i++) {
        const angle = t * 0.006 + (i * Math.PI * 2) / 5;
        const orbitR = 55 + Math.sin(t * 0.01 + i) * 8;
        const sx = cx + Math.cos(angle) * orbitR;
        const sy = cy + Math.sin(angle) * orbitR;
        const starSize = 2.5 + Math.sin(t * 0.03 + i * 2) * 1;

        ctx.fillStyle = border;
        ctx.globalAlpha = 0.4 + Math.sin(t * 0.025 + i) * 0.2;
        drawStar(sx, sy, starSize, starSize * 0.4, 5);
        ctx.fill();
      }

      ctx.globalAlpha = 1;

      // Outer glow rings
      for (let ring = 2; ring >= 0; ring--) {
        const ringR = 22 + ring * 10 + pulse * 6;
        const ringAlpha = (0.04 - ring * 0.01) * (0.5 + pulse * 0.5);
        ctx.globalAlpha = ringAlpha;
        ctx.fillStyle = accent;
        ctx.beginPath();
        ctx.arc(cx, cy, ringR, 0, Math.PI * 2);
        ctx.fill();
      }

      ctx.globalAlpha = 1;

      // Main star
      const mainR = 16 + pulse * 3;
      const innerR = mainR * 0.4;

      // Star fill
      ctx.fillStyle = accent;
      ctx.globalAlpha = 0.15 + pulse * 0.1;
      drawStar(cx, cy, mainR, innerR, 5);
      ctx.fill();

      // Star stroke
      ctx.strokeStyle = accent;
      ctx.lineWidth = 1.5;
      ctx.globalAlpha = 0.7 + pulse * 0.3;
      drawStar(cx, cy, mainR, innerR, 5);
      ctx.stroke();

      ctx.globalAlpha = 1;

      // Update and draw particles
      for (let i = particles.length - 1; i >= 0; i--) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy -= 0.002; // slight upward drift
        p.life++;

        const lifeProgress = p.life / p.maxLife;
        if (lifeProgress >= 1) {
          particles.splice(i, 1);
          continue;
        }

        ctx.globalAlpha = (1 - lifeProgress) * 0.6;
        ctx.fillStyle = accent;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.size * (1 - lifeProgress * 0.5), 0, Math.PI * 2);
        ctx.fill();
      }

      ctx.globalAlpha = 1;
      t++;
      requestAnimationFrame(draw);
    }
    draw();
  }

  initStarAnimation();
</script>
