{
  "version": "5",
  "dialect": "mysql",
  "id": "db1bead5-d78a-4c8b-8c3e-16e1133a58a3",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "tables": {
    "artifacts": {
      "name": "artifacts",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sandbox_id": {
          "name": "sandbox_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "exec_id": {
          "name": "exec_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(512)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "mime": {
          "name": "mime",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "bytes": {
          "name": "bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sha256": {
          "name": "sha256",
          "type": "char(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "ref": {
          "name": "ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "retention_until": {
          "name": "retention_until",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_sandbox_created": {
          "name": "idx_sandbox_created",
          "columns": [
            "sandbox_id",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_sandbox_name": {
          "name": "idx_sandbox_name",
          "columns": [
            "sandbox_id",
            "name"
          ],
          "isUnique": false
        },
        "idx_org_retention": {
          "name": "idx_org_retention",
          "columns": [
            "org_id",
            "retention_until"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "artifacts_id": {
          "name": "artifacts_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "execs": {
      "name": "execs",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sandbox_id": {
          "name": "sandbox_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "session_id": {
          "name": "session_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "seq": {
          "name": "seq",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cmd": {
          "name": "cmd",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cmd_format": {
          "name": "cmd_format",
          "type": "enum('array','shell')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'array'"
        },
        "cwd": {
          "name": "cwd",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "env": {
          "name": "env",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('queued','running','done','failed','timed_out')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'queued'"
        },
        "exit_code": {
          "name": "exit_code",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "cpu_ms": {
          "name": "cpu_ms",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "peak_memory_bytes": {
          "name": "peak_memory_bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "duration_ms": {
          "name": "duration_ms",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "log_ref": {
          "name": "log_ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_sandbox_seq": {
          "name": "idx_sandbox_seq",
          "columns": [
            "sandbox_id",
            "seq"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "execs_id": {
          "name": "execs_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "idempotency_keys": {
      "name": "idempotency_keys",
      "columns": {
        "idem_key": {
          "name": "idem_key",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('processing','completed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'processing'"
        },
        "response_status": {
          "name": "response_status",
          "type": "int",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "response_body": {
          "name": "response_body",
          "type": "mediumtext",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        }
      },
      "indexes": {
        "idx_org": {
          "name": "idx_org",
          "columns": [
            "org_id"
          ],
          "isUnique": false
        },
        "idx_created_at": {
          "name": "idx_created_at",
          "columns": [
            "created_at"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "idempotency_keys_idem_key": {
          "name": "idempotency_keys_idem_key",
          "columns": [
            "idem_key"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "images": {
      "name": "images",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "os_version": {
          "name": "os_version",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "toolchain": {
          "name": "toolchain",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "kernel_ref": {
          "name": "kernel_ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "rootfs_ref": {
          "name": "rootfs_ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "snapshot_ref": {
          "name": "snapshot_ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "digest": {
          "name": "digest",
          "type": "char(64)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "size_bytes": {
          "name": "size_bytes",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "deprecated_at": {
          "name": "deprecated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "uk_image": {
          "name": "uk_image",
          "columns": [
            "os_version",
            "toolchain"
          ],
          "isUnique": true
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "images_id": {
          "name": "images_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "nodes": {
      "name": "nodes",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "hostname": {
          "name": "hostname",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "slots_total": {
          "name": "slots_total",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 4
        },
        "status": {
          "name": "status",
          "type": "enum('online','offline','draining','disabled')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'offline'"
        },
        "version": {
          "name": "version",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "firecracker_version": {
          "name": "firecracker_version",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "capabilities": {
          "name": "capabilities",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "last_seen_at": {
          "name": "last_seen_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {
        "idx_status": {
          "name": "idx_status",
          "columns": [
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "nodes_id": {
          "name": "nodes_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "org_quotas": {
      "name": "org_quotas",
      "columns": {
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "max_concurrent_sandboxes": {
          "name": "max_concurrent_sandboxes",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 10
        },
        "max_ttl_seconds": {
          "name": "max_ttl_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 14400
        },
        "max_exec_timeout_seconds": {
          "name": "max_exec_timeout_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 7200
        },
        "artifact_retention_days": {
          "name": "artifact_retention_days",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 30
        },
        "rate_sandbox_create_per_min": {
          "name": "rate_sandbox_create_per_min",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 30
        },
        "rate_exec_per_min": {
          "name": "rate_exec_per_min",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 120
        },
        "rate_read_per_min": {
          "name": "rate_read_per_min",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 600
        },
        "idle_timeout_seconds": {
          "name": "idle_timeout_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 900
        },
        "max_fork_depth": {
          "name": "max_fork_depth",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 5
        },
        "max_forks_per_sandbox": {
          "name": "max_forks_per_sandbox",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 10
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "org_quotas_org_id": {
          "name": "org_quotas_org_id",
          "columns": [
            "org_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "profiles": {
      "name": "profiles",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "name": {
          "name": "name",
          "type": "varchar(32)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "cpu_cores": {
          "name": "cpu_cores",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "memory_mb": {
          "name": "memory_mb",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "disk_gb": {
          "name": "disk_gb",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "description": {
          "name": "description",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "profiles_id": {
          "name": "profiles_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {
        "profiles_name_unique": {
          "name": "profiles_name_unique",
          "columns": [
            "name"
          ]
        }
      },
      "checkConstraint": {}
    },
    "sandbox_sessions": {
      "name": "sandbox_sessions",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "sandbox_id": {
          "name": "sandbox_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "shell": {
          "name": "shell",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'/bin/bash'"
        },
        "status": {
          "name": "status",
          "type": "enum('running','destroyed')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'running'"
        },
        "env": {
          "name": "env",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "destroyed_at": {
          "name": "destroyed_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_sandbox_status": {
          "name": "idx_sandbox_status",
          "columns": [
            "sandbox_id",
            "status"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "sandbox_sessions_id": {
          "name": "sandbox_sessions_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    },
    "sandboxes": {
      "name": "sandboxes",
      "columns": {
        "id": {
          "name": "id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "org_id": {
          "name": "org_id",
          "type": "varchar(36)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "node_id": {
          "name": "node_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "image_id": {
          "name": "image_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "profile_id": {
          "name": "profile_id",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "profile_name": {
          "name": "profile_name",
          "type": "varchar(32)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false
        },
        "status": {
          "name": "status",
          "type": "enum('queued','provisioning','running','stopping','stopped','failed','deleted')",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "'queued'"
        },
        "env": {
          "name": "env",
          "type": "json",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "forked_from": {
          "name": "forked_from",
          "type": "binary(16)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "fork_depth": {
          "name": "fork_depth",
          "type": "tinyint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "fork_count": {
          "name": "fork_count",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 0
        },
        "ttl_seconds": {
          "name": "ttl_seconds",
          "type": "int",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": 3600
        },
        "failure_reason": {
          "name": "failure_reason",
          "type": "enum('capacity_timeout','node_lost','provision_failed','sandbox_stopped','sandbox_deleted','ttl_exceeded')",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "replay_bundle_ref": {
          "name": "replay_bundle_ref",
          "type": "varchar(1024)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "default": "(now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": true,
          "autoincrement": false,
          "onUpdate": true,
          "default": "(now())"
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp(6)",
          "primaryKey": false,
          "notNull": false,
          "autoincrement": false
        }
      },
      "indexes": {
        "idx_org_status_created": {
          "name": "idx_org_status_created",
          "columns": [
            "org_id",
            "status",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_org_created": {
          "name": "idx_org_created",
          "columns": [
            "org_id",
            "created_at"
          ],
          "isUnique": false
        },
        "idx_node_status": {
          "name": "idx_node_status",
          "columns": [
            "node_id",
            "status"
          ],
          "isUnique": false
        },
        "idx_status_ended": {
          "name": "idx_status_ended",
          "columns": [
            "status",
            "ended_at"
          ],
          "isUnique": false
        },
        "idx_forked_from": {
          "name": "idx_forked_from",
          "columns": [
            "forked_from"
          ],
          "isUnique": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "sandboxes_id": {
          "name": "sandboxes_id",
          "columns": [
            "id"
          ]
        }
      },
      "uniqueConstraints": {},
      "checkConstraint": {}
    }
  },
  "views": {},
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {},
    "indexes": {}
  }
}